# TODO

[ ] add format info in scvalue_t
[ ] improve date/time representation and formatting
[ ] save expression values in .sc files
[ ] add ':' range constructor from cell references
[ ] make cell notes separate structures
[ ] pattern directed input in vi.c
[ ] sparse matrix database
[ ] remove yacc based parser
[ ] stack based dynamic type interpreter
[ ] remove cell pointers
[ ] rewrite update()
[ ] update() should not have a side effect on currow/curcol
[ ] update() should not have a side effect on the database
[ ] handle memory allocation failure everywhere
[ ] generalize aggregate functions for multiple arguments
[ ] introduce new functions for conditional aggregation
[ ] define precise semantics for words in lexer (ie: `3rdrow`)
[ ] write test cases for all commands and corner cases
[ ] fix modflg, FullUpdate, modified, IS_CHANGED handling
[ ] hash sc_string_t in a dictionary?
[ ] special case some sc_string_t like the empty string?
[ ] all LISTABBREV instead of ABBREV hack?
[ ] same for DEFINE with one or no arguments?
[ ] validate and clip all ranges in commands
[ ] add sheet number in cell references
[ ] group sheet data in sheet_t structures
[ ] make delbufs sheet_t instances
[ ] make delbufs point to sheet_t instances, handle duplicates
[ ] ignore unknown commands (keep them in a list?)
[ ] pass count to duprow() and dupcol() ???
[ ] use rangeref_t for find_range_coords() ?
[ ] change representation for ranges: abs/rel coords instead of pointers
[ ] change the expression evaluator: use a stack of dynamically typed values
[ ] use an array of format strings, store an index in the cell struct
[ ] compile to bytecode
[ ] implement virtual space: jagged 2D matrix
[ ] add emacs keybinding stuff
[ ] add emacs macro language
[ ] add emacs command completion
[ ] use command templates for 1-2-3 menu driven commands and vi interaction
[/] add 1-2-3 menus and connect them
[ ] change expression functions for API compatibility
[ ] more efficient cell structure
[ ] convert help to markdown
[ ] built-in hyperlinked help system
[ ] chain cells with formulas into a linked list or dependency tree
[ ] add undo / autobackup of things typed in.
	idea: each cell change output to a stdio open file
		in the save format, fflush() every so often...
		(diffs w/r to the original file)
[ ] make sure ISVALID should <not> be used in place of checkbounds
	in interp.c
[/] generic formats
[ ] hide range
[ ] block moving into range
[ ] an option to go into a ^R like <mode>
	++data entry fields (highlight entry cells)....
	++only allow entry in these cells....
[ ] don't redraw the whole screen all the time
	(only cells that change, (in addition to what is in 'fixed #9'))
	(Note: there was no #9 when I took this over, and I've renumbered
	things since then, so I'm not sure what this is referring to - CRM)
[ ] rewrite update() function in screen.c from scratch in a more sane manner
	(the current one is buggy and a headache to debug)
[ ] add a command line option (possibly -g) to use sc as a sort of grep for
	formatted or unformatted data in a file or list of files which will
	output the whole row in which a given number or string is found,
	formatted as with the write command.

# DONE

[X] pass cell locations and ranges as sets of coordinates instead of
    allocated cell pointers in gram.y
[X] use rangeref_t and HAS_NOTE flag for notes
[X] remove currow/curcol side effects in yankrows() and yankcols()
[X] remove cellassign side effect
[X] use sc_string_t: shared allocated strings with a reference count,
[X] use pstrcpy and pstrcat, truncating and returning new length
[X] make histfile a string_t
[N] change scxrealloc to update the pointer in place?
[X] track memory allocation, check for full release upon exit
[X] simplify colsinrange/rowsinrange stuff
[N] make curfile a string_t
[X] fix operator precedence issue in `<=`, `>=`, `!=` and `<>`
[X] add third argument for @ext default/last answer
[X] handle dynamic types
[X] STOP THIS NUMERIC/STRING confusing bullshit!
[X] cell value must be either a number or a string, with an optional expression
